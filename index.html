<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <title>Cooljs</title>

    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/webcomponentsjs/0.5.2/webcomponents.min.js"></script>

    <link rel="import" href="https://www.polymer-project.org/components/core-icon-button/core-icon-button.html">
    <link rel="import" href="https://www.polymer-project.org/components/core-toolbar/core-toolbar.html">
    <link rel="import" href="https://www.polymer-project.org/components/core-media-query/core-media-query.html">
    <link rel="import" href="https://www.polymer-project.org/components/core-menu/core-menu.html">
    <link rel="import" href="https://www.polymer-project.org/components/core-menu/core-submenu.html">
    <link rel="import" href="https://www.polymer-project.org/components/core-dropdown/core-dropdown.html">
    <link rel="import" href="https://www.polymer-project.org/components/core-dropdown-menu/core-dropdown-menu.html">


    <!--
        <link rel="import" href="https://www.polymer-project.org/components/.html">

        -->

</head>

<body unresolved>
    <header>
        <div class="inner">
            <h1>Cooljs</h1>
            <h2>MVVM framework</h2>
            <a href="https://github.com/algoverse/cooljs" class="button"><small>View project on</small> GitHub</a>
        </div>
    </header>
    <div class="inner">
        <cool-app></cool-app>
    </div>

    <polymer-element name="cool-app">
        <template>
            <core-toolbar>
                <div flex>API reference</div>

                <a href="#" on-click="{{wtf}}">
                    <core-icon-button id="btnLanguage" icon="language">
                        <core-dropdown id="btnLanguageMenu" class="with-margin">
                            <core-selector id="csLanguage">

                                <template repeat="{{key in keys}}">
                                    <core-item>{{supported[key]}}</core-item>
                                </template>
                                <!--<core-item>English</core-item>
                                <core-item>Russian</core-item>
                                <core-item>Need more?</core-item>-->
                            </core-selector>
                        </core-dropdown>
                    </core-icon-button>
                </a>
            </core-toolbar>
            <div horizontal layout>
                <core-menu selected="0">
                    <core-submenu icon="settings" label="Topics">
                        <core-item label="Topic 1"></core-item>
                        <core-item label="Topic 2"></core-item>
                    </core-submenu>
                    <core-submenu icon="settings" label="Favorites">
                        <core-item label="Favorite 1"></core-item>
                        <core-item label="Favorite 2"></core-item>
                        <core-item label="Favorite 3"></core-item>
                    </core-submenu>
                </core-menu>

                <div id="content" flex></div>
            </div>
        </template>
        <script>
            Polymer("cool-app",
            {
                tdata: [1, 2, 3, 4],
                supported: { en: "English", ru: "Russian", how: "Need more?" },
                language: window.navigator.userLanguage || window.navigator.language,
                page: "what-is",

                ready : function()
                {
                    this.keys = Object.keys(this.supported);
                    this.lang = this.language.substr(0, 2);

                    if (!this.supported[this.lang])
                    {
                        this.lang = "en";
                    }

                    //document.querySelector('$.csLanguage').addEventListener('core-select', function (event)
                    this.$.csLanguage.addEventListener('core-select', function (event)
                    {

                    });
                },

                updatePage : function()
                {
                    document.getElementById("content").innerHTML = '<object type="text/html" data="content/' + this.lang + '/' + this.page + '.html" ></object>';
                },

                wtf : function()
                {
                    this.$.btnLanguageMenu.toggle();
                },

                data:
                [
                    {
                        name:
                        {
                            en: "Getting Started",
                            ru: "Для начинающих"
                        },
                        pages:
                        [
                            {
                                id: 1,
                                name:
                                {
                                    en: "What is Cooljs?",
                                    ru: "Что такое Cooljs?"
                                },
                                page: "what-is"
                            },
                            {
                                id: 2,
                                name:
                                {
                                    en: "Cooljs in 5 minutes",
                                    ru: "Cooljs за 5 минут"
                                },
                                page: "5-min"
                            },
                        ]
                    },
                    {
                        name:
                        {
                            en: "API Reference",
                            ru: "API Справочниик"
                        },
                        pages:
                        [
                            {
                                id: 3,
                                name:
                                {
                                    en: "What is Cooljs?",
                                    ru: "Что такое Cooljs?"
                                },
                                page: "what-is"
                            },
                            {
                                id: 4,
                                name:
                                {
                                    en: "Cooljs in 5 minutes",
                                    ru: "Cooljs за 5 минут"
                                },
                                page: "what-is"
                            },
                        ]
                    }
                ]


                //document.addEventListener('click', function (e)
                //{
                //    var pages = document.querySelector('core-pages');
                //    pages.selected = (pages.selected + 1) % pages.children.length;
                //});

                //updatePage();
            });
        </script>
    </polymer-element>
</body>
</html>
